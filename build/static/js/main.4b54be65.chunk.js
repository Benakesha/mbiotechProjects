(this.webpackJsonpmbiotechexecutive=this.webpackJsonpmbiotechexecutive||[]).push([[0],{247:function(e,t,a){e.exports=a(534)},260:function(e,t,a){},398:function(e,t,a){},414:function(e,t,a){},488:function(e,t,a){},531:function(e,t,a){},532:function(e,t,a){},533:function(e,t,a){},534:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(4),o=a.n(l),c=a(38),i=a(33),s=a(94),m=a(225),u=(a(256),a(257),a(258),a(259),a(30)),d=a(31),h=a(34),p=a(32),g=a(35),f=a(57),b=a(88),E=a(538),k=a(539),y=a(540),v=a(545),N=a(546),C=a(10),I=a(79),x=(a(260),a(226)),w=a.n(x).a.create({baseURL:"http://ec2-13-58-162-228.us-east-2.compute.amazonaws.com/api/v1"});w.defaults.headers.common["Content-Type"]="application/json",w.interceptors.request.use((function(e){return e}),(function(e){return e})),w.interceptors.response.use((function(e){return e}),(function(e){return e}));var S=w,P=function(e,t,a){return{type:"LOGIN_SUCCESS",token:e,username:t,role:a}},O=function(e){return{type:"LOGIN_FAILURE",error:e}},D=function(){return localStorage.clear(),{type:"LOGOUT"}},j=function(e){return function(t){setTimeout((function(){t(D())}),1e3*e)}},A=function(e){return{type:"SET_AUTH_REDIRECT_PATH",path:e}},F=function(e){return function(t){t({type:"LOGIN_REQUEST"}),console.log("userdata----",e),S.post("/login",e).then((function(e){if(console.log("response-----",e),e.data.success){var a=new Date((new Date).getTime()+1e3*e.data.expiresIn);localStorage.setItem("token",e.data.token),localStorage.setItem("expirationDate",a),localStorage.setItem("username",e.data.username),localStorage.setItem("role",e.data.role),t(P(e.data.token,e.data.username,e.data.role)),t(j(e.data.expiresIn))}else t(O(e.data.message))})).catch((function(e){t(O(e))}))}},R=(E.a.Header,E.a.Content,function(e){var t=e.formErrors,a=Object(b.a)(e,["formErrors"]),n=!0;return Object.values(t).forEach((function(e){e.length>0&&(n=!1)})),Object.values(a).forEach((function(e){null===e&&(n=!1)})),n}),B=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,T=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={email:null,password:null,touched:{email:!1,password:!1},formError:{email:"",password:""}},a.onInputChange=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value,l=a.state.formError;switch(n){case"email":l.email=B.test(r)&&r.length>0?"":"Enter valid email";break;case"password":l.password=r.length<6&&r.length>0?"Min 6 character required":""}a.setState(Object(f.a)({formErrors:l},n,r),(function(){}))},a.onButtonClickHandler=function(e){var t=a.state,n=t.email,r=t.password,l=t.formError;null===n&&null===r&&(l.email="Email field required",l.password="Password field required"),a.setState({formError:l})},a.loginSubmitHandler=function(e){if(e.preventDefault(),R(a.state)){var t={email:a.state.email,password:a.state.password};a.props.onAuth(t)}},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.isAuthenticated&&this.props.onSetAuthRedirectPath()}},{key:"render",value:function(){var e=this,t=this.state.formError;return this.props.isAuthenticated&&this.props.history.push("/dashboard"),r.a.createElement(k.a,null,r.a.createElement(y.a,{xs:{span:18,offset:3},sm:{span:12,offset:7},md:{span:10,offset:7}},r.a.createElement("form",{className:"form",onSubmit:this.loginSubmitHandler},r.a.createElement("h3",{className:"h3"},"Login to MbioTech "),this.props.isError?r.a.createElement("p",{style:{color:"red",textAlign:"center"}},this.props.isError):null,r.a.createElement(v.a.Item,{className:"formElement",hasFeedback:!0,validateStatus:t.email.length>0?"error":"",help:t.email},r.a.createElement(N.a,{placeholder:"email",name:"email",prefix:r.a.createElement(C.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}})),r.a.createElement(v.a.Item,{className:"formElement",hasFeedback:!0,validateStatus:t.password.length>0?"error":"",help:t.password},r.a.createElement(N.a,{required:!0,placeholder:"password",name:"password",prefix:r.a.createElement(C.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}})),r.a.createElement(v.a.Item,{className:"formElement"},r.a.createElement(I.a,{onClick:this.onButtonClickHandler,htmlType:"submit",block:!0,style:{backgroundColor:"#2BBBAD",color:"#FFF",fontSize:"18px"}},"Login",r.a.createElement(C.a,{type:"login",style:{marginLeft:"3%"}}))))))}}]),t}(n.Component),M=Object(i.b)((function(e){return{isAuthenticated:null!==e.auth.token,isError:e.auth.error,isLoading:e.auth.loading,authRedirectPath:e.auth.authRedirectPath}}),(function(e){return{onAuth:function(t){return e(F(t))},onSetAuthRedirectPath:function(){return e(A("/dashboard"))}}}))(T),_=a(104),z=a(541),q=a(542),L=a(92),H=(a(398),a(12)),U=a.n(H),$=a(68),G=a(99),Y=a(16),W=(a(414),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).onLogoutHandler=function(){a.props.onLogout()},a.state={collapse:!1},a.onClick=a.onClick.bind(Object(G.a)(a)),a.onLogoutHandler=a.onLogoutHandler.bind(Object(G.a)(a)),a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"onClick",value:function(){this.setState({collapse:!this.state.collapse})}},{key:"render",value:function(){var e=this.props.match;return r.a.createElement("div",{style:{backgroundColor:"red"}},r.a.createElement("header",null,r.a.createElement(Y.n,{style:{backgroundColor:"#2BBBAD"},dark:!0,expand:"md",scrolling:!0,fixed:"top"},r.a.createElement(Y.o,{href:"/"},r.a.createElement("strong",null,"MbioTech")),r.a.createElement(Y.q,{onClick:this.onClick}),r.a.createElement(Y.d,{isOpen:this.state.collapse,navbar:!0},r.a.createElement(Y.p,{left:!0},r.a.createElement(Y.l,{active:"/dashboard"===e.path},r.a.createElement(Y.m,{to:"/dashboard"}," ",r.a.createElement(Y.j,{icon:"street-view"}),"\xa0Dashboard")),"admin"===this.props.role?r.a.createElement(Y.l,{active:"/report"===e.path},r.a.createElement(Y.m,{to:"report"}," ",r.a.createElement(Y.j,{icon:"address-book"}),"\xa0Report")):null,"admin"===this.props.role?r.a.createElement(Y.l,{active:"/adduser"===e.path},r.a.createElement(Y.m,{to:"adduser"},r.a.createElement(Y.j,{icon:"user-plus"}),"\xa0Add User")):null,"admin"===this.props.role?r.a.createElement(Y.l,{active:"/users"===e.path},r.a.createElement(Y.m,{to:"users"},r.a.createElement(Y.j,{icon:"users"}),"\xa0Users")):null,"admin"===this.props.role?r.a.createElement(Y.l,{active:"/sitedetails"===e.path},r.a.createElement(Y.m,{to:"sitedetails"},r.a.createElement(Y.j,{icon:"book"}),"\xa0Site Details")):null),r.a.createElement(Y.p,{right:!0},r.a.createElement(Y.l,null,r.a.createElement(Y.f,null,r.a.createElement(Y.i,{nav:!0,caret:!0},r.a.createElement(Y.j,{icon:"user"})),r.a.createElement(Y.h,{className:"dropdown-default"},r.a.createElement(Y.g,{onClick:this.onLogoutHandler},"Logout\xa0\xa0",r.a.createElement(Y.j,{icon:"sign-out-alt"}))))))))))}}]),t}(r.a.Component)),Z=Object(i.b)((function(e){return{role:e.auth.role}}),(function(e){return{onLogout:function(){return e(D())}}}))(Object($.g)(W)),V=a(131),K=a(132),J=E.a.Footer,Q=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(J,{style:{backgroundColor:"#2BBBAD",color:"#FFF",textAlign:"center",width:"100%"}},r.a.createElement("p",null,"Copyright \xa92019 All rights reserved Embiot Technologies "))}}]),t}(n.Component),X=_.a.Option,ee=(E.a.Header,E.a.Content),te=function(e){var t=e.formErrors,a=(Object(b.a)(e,["formErrors"]),!0);return console.log("rr--",t),Object.values(t).forEach((function(e){e.length>0&&(a=!1)})),a},ae=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,ne=/^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/g,re=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,a.state={username:null,email:null,phoneNo:null,address:null,pincode:null,ctrname:"",ctrno:"",elname:"",elno:"",carpname:"",carpno:"",pantrname:"",pantrno:"",plumname:"",plumno:"",intname:"",intno:"",fabrname:"",fabrino:"",role:[],checked:{contractor:!1,electritian:!1,carpenter:!1,painter:!1,plumber:!1,interior:!1,fabricator:!1},formError:{username:"",email:"",phoneNo:"",address:"",pincode:"",role:"",ctrname:"",ctrno:"",elname:"",elno:"",carpname:"",carpno:"",pantrname:"",pantrno:"",plumname:"",plumno:"",intname:"",intno:"",fabrname:"",fabrino:""}},a.onInputChange=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value,l=a.state.formError;switch(n){case"username":r.length>0&&!ne.test(r.trim())?l.username="Please enter valid username":r.length<3&&r.length>0?l.username="Min 3 character required":l.username="";break;case"email":l.email=ae.test(r)&&r.length>0?"":"Enter valid email";break;case"phoneNo":r.length<10&&r.length>0?l.phoneNo="Enter valid phone number":r.length>0&&!U.a.isInt(r.trim())?l.phoneNo="Phone number should be a number":r.length>10?l.phoneNo="Phone number should be 10 digit":l.phoneNo="";break;case"address":l.address=""!==r.trim()&&r.length>0?"":"please enter address";break;case"pincode":r.length<6&&r.length>0?l.pincode="Min 6 character required":r.length>0&&!U.a.isInt(r.trim())?l.pincode="Pincode should be a number":r.length>6&&r.length>0?l.pincode="Max 6 character allowed":l.pincode="";break;case"ctrname":r.length>0&&!ne.test(r.trim())?l.ctrname="Please enter valid name":r.length<3&&r.length>0?l.ctrname="Min 3 character required":l.ctrname="";break;case"ctrno":r.length<10&&r.length>0?l.ctrno="Enter valid phone number":r.length>0&&!U.a.isInt(r.trim())?l.ctrno="Phone number should be a number":r.length>10?l.ctrno="Phone number should be 10 digit":l.ctrno="";break;case"elname":r.length>0&&!ne.test(r.trim())?l.elname="Please enter valid name":r.length<3&&r.length>0?l.elname="Min 3 character required":l.elname="";break;case"elno":r.length<10&&r.length>0?l.elno="Enter valid phone number":r.length>0&&!U.a.isInt(r.trim())?l.elno="Phone number should be a number":r.length>10?l.elno="Phone number should be 10 digit":l.elno="";break;case"carpname":r.length>0&&!ne.test(r.trim())?l.carpname="Please enter valid name":r.length<3&&r.length>0?l.carpname="Min 3 character required":l.carpname="";break;case"carpno":r.length<10&&r.length>0?l.carpno="Enter valid phone number":r.length>0&&!U.a.isInt(r.trim())?l.carpno="Phone number should be a number":r.length>10?l.carpno="Phone number should be 10 digit":l.carpno="";break;case"pantrname":r.length>0&&!ne.test(r.trim())?l.pantrname="Please enter valid name":r.length<3&&r.length>0?l.pantrname="Min 3 character required":l.pantrname="";break;case"pantrno":r.length<10&&r.length>0?l.pantrno="Enter valid phone number":r.length>0&&!U.a.isInt(r.trim())?l.pantrno="Phone number should be a number":r.length>10?l.pantrno="Phone number should be 10 digit":l.pantrno="";break;case"plumname":r.length>0&&!ne.test(r.trim())?l.plumname="Please enter valid name":r.length<3&&r.length>0?l.plumname="Min 3 character required":l.plumname="";break;case"plumno":r.length<10&&r.length>0?l.plumno="Enter valid phone number":r.length>0&&!U.a.isInt(r.trim())?l.plumno="Phone number should be a number":r.length>10?l.plumno="Phone number should be 10 digit":l.plumno="";break;case"intname":r.length>0&&!ne.test(r.trim())?l.intname="Please enter valid name":r.length<3&&r.length>0?l.intname="Min 3 character required":l.intname="";break;case"intno":r.length<10&&r.length>0?l.intno="Enter valid phone number":r.length>0&&!U.a.isInt(r.trim())?l.intno="Phone number should be a number":r.length>10?l.intno="Phone number should be 10 digit":l.intno="";break;case"fabrname":r.length>0&&!ne.test(r.trim())?l.fabrname="Please enter valid name":r.length<3&&r.length>0?l.fabrname="Min 3 character required":l.fabrname="";break;case"fabrino":r.length<10&&r.length>0?l.fabrino="Enter valid phone number":r.length>0&&!U.a.isInt(r.trim())?l.fabrino="Phone number should be a number":r.length>10?l.fabrino="Phone number should be 10 digit":l.fabrino=""}a.setState(Object(f.a)({formErrors:l},n,r),(function(){}))},a.onvisitorButtonClickHandler=function(e){var t=a.state,n=t.email,r=t.username,l=t.phoneNo,o=t.address,c=t.pincode,i=t.role,s=t.formError;null===n&&(s.email="Email field required"),null===r&&(s.username="Username field required"),null===l&&(s.phoneNo="Phone no field required"),null===o&&(s.address="Address field required"),null===c&&(s.pincode="Pincode field required"),i.length<=0&&(s.role="Role is required"),a.setState({formError:s})},a.selectChangeHandle=function(e){var t=a.state.formError;t.role=e.length<=0?"please select role ":"",a.setState(Object(f.a)({formErrors:t},"role",e),(function(){}))},a.addvisitorSubmitHandler=function(e){if(e.preventDefault(),te(a.state)){var t={username:U.a.escape(a.state.username),email:U.a.escape(a.state.email),phoneNo:U.a.escape(a.state.phoneNo),address:U.a.escape(a.state.address),pincode:U.a.escape(a.state.pincode),role:a.state.role,cname:U.a.escape(a.state.ctrname),cphone:U.a.escape(a.state.ctrno),elname:U.a.escape(a.state.elname),elno:U.a.escape(a.state.elno),carpname:U.a.escape(a.state.carpname),carpno:U.a.escape(a.state.carpno),pantrname:U.a.escape(a.state.pantrname),pantrno:U.a.escape(a.state.pantrno),plumname:U.a.escape(a.state.plumname),plumno:U.a.escape(a.state.plumno),intname:U.a.escape(a.state.intname),intno:U.a.escape(a.state.intno),fabrname:U.a.escape(a.state.fabrname),fabrino:U.a.escape(a.state.fabrino),executiveName:localStorage.getItem("username")?U.a.escape(localStorage.getItem("username")):""};S.post("/visitor",{userData:t}).then((function(e){e.status,z.a.open({message:e.data.message,duration:2,top:80})})).catch((function(e){q.a.error(e)}))}},a.onCheckboxChange2=function(e){if("electritian"===e.target.name&&e.target.checked){var t=a.state.checked;t.electritian=e.target.checked,a.setState({checked:t})}else{var n=a.state.checked;n.electritian=e.target.checked,a.setState({checked:n})}},a.onCheckboxChange1=function(e){if("contractor"===e.target.name&&e.target.checked){var t=a.state.checked;t.contractor=e.target.checked,a.setState({checked:t})}else{var n=a.state.checked;n.contractor=e.target.checked,a.setState({checked:n})}},a.onCheckboxChange3=function(e){if("carpenter"===e.target.name&&e.target.checked){var t=a.state.checked;t.carpenter=e.target.checked,a.setState({checked:t})}else{var n=a.state.checked;n.carpenter=e.target.checked,a.setState({checked:n})}},a.onCheckboxChange4=function(e){if("painter"===e.target.name&&e.target.checked){var t=a.state.checked;t.painter=e.target.checked,a.setState({checked:t})}else{var n=a.state.checked;n.painter=e.target.checked,a.setState({checked:n})}},a.onCheckboxChange5=function(e){if("plumber"===e.target.name&&e.target.checked){var t=a.state.checked;t.plumber=e.target.checked,a.setState({checked:t})}else{var n=a.state.checked;n.plumber=e.target.checked,a.setState({checked:n})}},a.onCheckboxChange6=function(e){if("interior"===e.target.name&&e.target.checked){var t=a.state.checked;t.interior=e.target.checked,a.setState({checked:t})}else{var n=a.state.checked;n.interior=e.target.checked,a.setState({checked:n})}},a.onCheckboxChange7=function(e){if("fabricator"===e.target.name&&e.target.checked){var t=a.state.checked;t.fabricator=e.target.checked,a.setState({checked:t})}else{var n=a.state.checked;n.fabricator=e.target.checked,a.setState({checked:n})}},a.onInputChange1=function(e){},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;if(!this.props.isAuthenticated)return r.a.createElement($.a,{to:"/"});var t=this.state.formError;return r.a.createElement(k.a,null,r.a.createElement(y.a,{span:24},r.a.createElement(E.a,null,r.a.createElement(Z,null),r.a.createElement(Y.e,{className:"text-center mt-5",style:{backgroundColor:"#FFF",paddingBottom:"5%"}},r.a.createElement(ee,null,r.a.createElement(k.a,null,r.a.createElement(y.a,{xs:{span:18,offset:3},sm:{span:12,offset:7},md:{span:10,offset:7}},r.a.createElement("form",{className:"form",onSubmit:this.addvisitorSubmitHandler},r.a.createElement("h3",{className:"h3"},"Site Visit Details"),r.a.createElement(v.a.Item,{className:"formElement",hasFeedback:!0,validateStatus:t.username.length>0?"error":"",help:t.username},r.a.createElement(N.a,{required:!0,placeholder:"Owner Name",name:"username",prefix:r.a.createElement(C.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}})),r.a.createElement(v.a.Item,{className:"formElement",hasFeedback:!0,validateStatus:t.email.length>0?"error":"",help:t.email},r.a.createElement(N.a,{placeholder:"Email",name:"email",prefix:r.a.createElement(C.a,{type:"ie",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}})),r.a.createElement(v.a.Item,{className:"formElement",hasFeedback:!0,validateStatus:t.phoneNo.length>0?"error":"",help:t.phoneNo},r.a.createElement(N.a,{placeholder:"Phone number",name:"phoneNo",prefix:r.a.createElement(C.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}})),r.a.createElement(v.a.Item,{className:"formElement",hasFeedback:!0,validateStatus:t.address.length>0?"error":"",help:t.address},r.a.createElement(N.a.TextArea,{placeholder:"Address",name:"address",onChange:function(t){return e.onInputChange(t)}})),r.a.createElement(v.a.Item,{className:"formElement",hasFeedback:!0,validateStatus:t.pincode.length>0?"error":"",help:t.pincode},r.a.createElement(N.a,{placeholder:"Pincode",name:"pincode",prefix:r.a.createElement(V.a,{icon:K.a,style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}})),r.a.createElement(v.a.Item,{className:"formElement",hasFeedback:!0,validateStatus:t.role.length>0?"error":"",help:t.role},r.a.createElement(_.a,{style:{width:"100%"},onChange:this.selectChangeHandle,showArrow:!0,mode:"multiple",placeholder:"Select Type of Site"},r.a.createElement(X,{key:"select",value:"select",disabled:!0},"Select Type of Site"),r.a.createElement(X,{key:"own",value:"own"},"Own"),r.a.createElement(X,{key:"rent",value:"rent"},"Rent"),r.a.createElement(X,{key:"hospital",value:"hospital"},"Hospital"),r.a.createElement(X,{key:"hotel",value:"hotel"},"Hotel"),r.a.createElement(X,{key:"restaurants",value:"restaurants"},"Restaurants/Inn"),r.a.createElement(X,{key:"apartment",value:"apartment"},"Apartment"),r.a.createElement(X,{key:"resort",value:"resorts"},"Resorts"),r.a.createElement(X,{key:"lodge",value:"lodge"},"Lodge"),r.a.createElement(X,{key:"choultry",value:"choultry"},"Choultry"),r.a.createElement(X,{key:"school",value:"school"},"School"),r.a.createElement(X,{key:"college",value:"college"},"College"),r.a.createElement(X,{key:"commercial",value:"commercial"},"Commercial"),r.a.createElement(X,{key:"residential",value:"residential"},"Residential"))),r.a.createElement(v.a.Item,{className:"checkboxElement"},r.a.createElement(L.a,{className:"check",name:"contractor",onChange:this.onCheckboxChange1},"Contractor")),this.state.checked.contractor?r.a.createElement("div",{className:"div1"},r.a.createElement("div",null,r.a.createElement(v.a.Item,{className:"checkSub",hasFeedback:!0,validateStatus:t.ctrname.length>0?"error":"",help:t.ctrname},r.a.createElement(N.a,{placeholder:"Contractor Name",name:"ctrname",prefix:r.a.createElement(C.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}}))),r.a.createElement("div",null,r.a.createElement(v.a.Item,{className:"checkSub",hasFeedback:!0,validateStatus:t.ctrno.length>0?"error":"",help:t.ctrno},r.a.createElement(N.a,{placeholder:"Contractor Phoneno",name:"ctrno",prefix:r.a.createElement(C.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}})))):null,r.a.createElement(v.a.Item,{className:"checkboxElement"},r.a.createElement(L.a,{className:"check",name:"electritian",onChange:this.onCheckboxChange2},"Electritian")),this.state.checked.electritian?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(v.a.Item,{className:"checkSub",hasFeedback:!0,validateStatus:t.elname.length>0?"error":"",help:t.elname},r.a.createElement(N.a,{placeholder:"Electritian Name",name:"elname",prefix:r.a.createElement(C.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}}))),r.a.createElement("div",null,r.a.createElement(v.a.Item,{className:"checkSub",hasFeedback:!0,validateStatus:t.elno.length>0?"error":"",help:t.elno},r.a.createElement(N.a,{placeholder:"Electritian Phoneno",name:"elno",prefix:r.a.createElement(C.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}})))):null,r.a.createElement(v.a.Item,{className:"checkboxElement"},r.a.createElement(L.a,{className:"check",name:"carpenter",onChange:this.onCheckboxChange3},"Carpenter")),this.state.checked.carpenter?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(v.a.Item,{className:"checkSub",hasFeedback:!0,validateStatus:t.carpname.length>0?"error":"",help:t.carpname},r.a.createElement(N.a,{placeholder:"Carpentor Name",name:"carpname",prefix:r.a.createElement(C.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}}))),r.a.createElement("div",null,r.a.createElement(v.a.Item,{className:"checkSub",hasFeedback:!0,validateStatus:t.carpno.length>0?"error":"",help:t.carpno},r.a.createElement(N.a,{placeholder:"Carpenter Phoneno",name:"carpno",prefix:r.a.createElement(C.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}})))):null,r.a.createElement(v.a.Item,{className:"checkboxElement"},r.a.createElement(L.a,{className:"check",name:"painter",onChange:this.onCheckboxChange4},"Painter")),this.state.checked.painter?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(v.a.Item,{className:"checkSub",hasFeedback:!0,validateStatus:t.pantrname.length>0?"error":"",help:t.pantrname},r.a.createElement(N.a,{placeholder:"Painter Name",name:"pantrname",prefix:r.a.createElement(C.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}}))),r.a.createElement("div",null,r.a.createElement(v.a.Item,{className:"checkSub",hasFeedback:!0,validateStatus:t.pantrno.length>0?"error":"",help:t.pantrno},r.a.createElement(N.a,{placeholder:"Painter Phoneno",name:"pantrno",prefix:r.a.createElement(C.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}})))):null,r.a.createElement(v.a.Item,{className:"checkboxElement"},r.a.createElement(L.a,{className:"check",name:"plumber",onChange:this.onCheckboxChange5},"Plumber")),this.state.checked.plumber?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(v.a.Item,{className:"checkSub",hasFeedback:!0,validateStatus:t.plumname.length>0?"error":"",help:t.plumname},r.a.createElement(N.a,{placeholder:"Plumber Name",name:"plumname",prefix:r.a.createElement(C.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}}))),r.a.createElement("div",null,r.a.createElement(v.a.Item,{className:"checkSub",hasFeedback:!0,validateStatus:t.plumno.length>0?"error":"",help:t.plumno},r.a.createElement(N.a,{placeholder:"Plumber Phoneno",name:"plumno",prefix:r.a.createElement(C.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}})))):null,r.a.createElement(v.a.Item,{className:"checkboxElement"},r.a.createElement(L.a,{className:"check",name:"interior",onChange:this.onCheckboxChange6},"Interior Designer")),this.state.checked.interior?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(v.a.Item,{className:"checkSub",hasFeedback:!0,validateStatus:t.intname.length>0?"error":"",help:t.intname},r.a.createElement(N.a,{placeholder:"Interior Name",name:"intname",prefix:r.a.createElement(C.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}}))),r.a.createElement("div",null,r.a.createElement(v.a.Item,{className:"checkSub",hasFeedback:!0,validateStatus:t.intno.length>0?"error":"",help:t.intno},r.a.createElement(N.a,{placeholder:"Interior Phoneno",name:"intno",prefix:r.a.createElement(C.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}})))):null,r.a.createElement(v.a.Item,{className:"checkboxElement"},r.a.createElement(L.a,{className:"check",name:"fabricator",onChange:this.onCheckboxChange7},"Fabricator")),this.state.checked.fabricator?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(v.a.Item,{className:"checkSub",hasFeedback:!0,validateStatus:t.fabrname.length>0?"error":"",help:t.fabrname},r.a.createElement(N.a,{placeholder:"Fabricator Name",name:"fabrname",prefix:r.a.createElement(C.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}}))),r.a.createElement("div",null,r.a.createElement(v.a.Item,{className:"checkSub",hasFeedback:!0,validateStatus:t.fabrino.length>0?"error":"",help:t.fabrino},r.a.createElement(N.a,{placeholder:"Fabricator Phoneno",name:"fabrino",prefix:r.a.createElement(C.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}})))):null,r.a.createElement(v.a.Item,{className:"formElement"},r.a.createElement(I.a,{onClick:this.onvisitorButtonClickHandler,htmlType:"submit",block:!0,style:{backgroundColor:"#2BBBAD",color:"#FFF",fontSize:"18px"}},"Add Visitors",r.a.createElement(C.a,{type:"user-add",style:{marginLeft:"3%"}})))))))),r.a.createElement(k.a,null,r.a.createElement(y.a,null,r.a.createElement(Q,null))))))}}]),t}(n.Component),le=Object(i.b)((function(e){return{isAuthenticated:null!==e.auth.token,isError:e.auth.error,isLoading:e.auth.loading,authRedirectPath:e.auth.authRedirectPath}}),(function(e){return{onAuth:function(t){return e(F(t))},onSetAuthRedirectPath:function(){return e(A("/dashboard"))}}}))(re),oe=a(543),ce=(a(488),a(76)),ie=E.a.Content,se=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,a.state={selectedRows:[],tableData:[]},a.onExportReport=function(){S.get("/exportData",{responseType:"blob"}).then((function(e){Object(ce.saveAs)(e.data,"MbiotechVisitors.xlsx")})).catch((function(e){console.log(e)}))},a.deleteRow=function(e){var t=e._id;S.put("/visitorDelete",{id:t}).then((function(e){console.log("res--",e),e.data.success&&(z.a.open({message:e.data.message,duration:2,top:80}),S.get("/visitorData").then((function(e){e.data.success&&a.setState({tableData:e.data.data})})).catch((function(e){console.log("er-last-",e)})))})).catch((function(e){console.log("err---",e)}))},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,S.get("/visitorData").then((function(t){t.data.success&&e.setState({tableData:t.data.data})})).catch((function(e){console.log("er--",e)}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=[{title:"Executive Name",dataIndex:"executiveName",key:"executiveName",fixed:"left",width:120},{title:"Name",dataIndex:"fullname",key:"fullname",fixed:"left",width:100},{title:"Email",dataIndex:"email",key:"age",width:100},{title:"Address",dataIndex:"address",key:"address",width:100},{title:"Phone",dataIndex:"phoneNo",key:"phoneNo",width:100},{title:"Place type",dataIndex:"typeOfPlace",key:"typeOfPlace",width:150},{title:"ContrName",dataIndex:"contractorName",key:"contractorName",width:110},{title:"ContrNo",dataIndex:"contractorPhoneNo",key:"contractorPhoneNo",width:100},{title:"ElectricianName",dataIndex:"electricianName",key:"electricianName",width:150},{title:"ElectricianNo",dataIndex:"electricianNo",key:"electricianNo",width:150},{title:"CarpenterName",dataIndex:"CarpenterName",key:"CarpenterName",width:150},{title:"CarpenterNo",dataIndex:"CarpenterNo",key:"CarpenterNo",width:150},{title:"PainterName",dataIndex:"PainterName",key:"PainterName",width:150},{title:"PainterNo",dataIndex:"PainterNo",key:"PainterNo",width:150},{title:"PlumberName",dataIndex:"PlumberName",key:"PlumberName",width:150},{title:"PlumberNo",dataIndex:"PlumberNo",key:"PlumberNo",width:150},{title:"InteriorName",dataIndex:"InteriorName",key:"InteriorName",width:150},{title:"InteriorNo",dataIndex:"InteriorNo",key:"InteriorNo",width:150},{title:"FabricatorName",dataIndex:"FabricatorName",key:"FabricatorName",width:150},{title:"FabricatorNo",dataIndex:"FabricatorNo",key:"FabricatorNo",width:150},{title:"Latitude",dataIndex:"latitude",key:"latitude",width:100},{title:"longitude",dataIndex:"longitude",key:"longitude",width:100},{title:"City",dataIndex:"city",key:"city",width:100},{title:"Timestamp",dataIndex:"timestamp",key:"timestamp",width:120},{title:"Action",key:"action",fixed:"right",width:100,render:function(t,a){return r.a.createElement("span",null,r.a.createElement(I.a,{type:"link",onClick:function(){return e.deleteRow(t)}},r.a.createElement(C.a,{type:"delete",style:{color:"red"}})))}}];return this.props.isAuthenticated?r.a.createElement(k.a,null,r.a.createElement(y.a,{span:24},r.a.createElement(E.a,null,r.a.createElement(Z,null),r.a.createElement(Y.e,{className:"text-center mt-5",style:{backgroundColor:"#FFF",paddingBottom:"5%",height:"100vh"}},r.a.createElement(I.a,{type:"primary",ghost:!0,htmlType:"button",style:{marginTop:"4%",float:"left",marginLeft:"5%",color:"#2BBBAD",borderColor:"#2BBBAD",width:120},onClick:this.onExportReport},"Export"),r.a.createElement(ie,{style:{backgroundColor:"#FFF",marginTop:"7%"}},r.a.createElement(k.a,null,r.a.createElement(y.a,{xs:{span:23,offset:3},sm:{span:12,offset:3},md:{span:24,offset:1}},r.a.createElement("div",{style:{marginTop:"2%",marginRight:"2%"}},r.a.createElement(oe.a,{scroll:{x:1300,y:350},rowKey:function(e){return e.email},columns:t,dataSource:this.state.tableData,pagination:!0,bordered:!0})))))),r.a.createElement(k.a,null,r.a.createElement(y.a,null,r.a.createElement(Q,null)))))):r.a.createElement($.a,{to:"/"})}}]),t}(n.Component),me=Object(i.b)((function(e){return{isAuthenticated:null!=e.auth.token}}))(se),ue=(a(531),_.a.Option),de=(E.a.Header,E.a.Content),he=function(e){var t=e.formErrors,a=Object(b.a)(e,["formErrors"]),n=!0;return Object.values(t).forEach((function(e){e.length>0&&(n=!1)})),Object.values(a).forEach((function(e){null===e&&(n=!1)})),n},pe=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,ge=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/,fe=/^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/g,be=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={username:null,email:null,password:null,phoneNo:null,address:null,pincode:null,role:"select",formError:{username:"",email:"",password:"",phoneNo:"",address:"",pincode:"",role:""}},a.onInputChange=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value,l=a.state.formError;switch(n){case"username":r.length>0&&!fe.test(r.trim())?l.username="Please enter valid username":r.length<3&&r.length>0?l.username="Min 3 character required":l.username="";break;case"email":l.email=pe.test(r)&&r.length>0?"":"Enter valid email";break;case"password":!ge.test(r)&&r.length>0?l.password="Password should contains atleast 1 lowercase ,1 uppercase,1 numeric ,1 special character and length must be 8":l.password="";break;case"phoneNo":r.length<10&&r.length>0?l.phoneNo="Enter valid phone number":r.length>0&&!U.a.isInt(r.trim())?l.phoneNo="Phone number should be a number":r.length>10?l.phoneNo="Phone number should be 10 digit":l.phoneNo="";break;case"address":l.address=""!==r.trim()&&r.length>0?"":"please enter address";break;case"pincode":r.length<6&&r.length>0?l.pincode="Min 6 character required":r.length>0&&!U.a.isInt(r.trim())?l.pincode="Pincode should be a number":r.length>6&&r.length>0?l.pincode="Max 6 character allowed":l.pincode=""}a.setState(Object(f.a)({formErrors:l},n,r),(function(){}))},a.onButtonClickHandler=function(e){var t=a.state,n=t.email,r=t.password,l=t.username,o=t.phoneNo,c=t.address,i=t.pincode,s=t.role,m=t.formError;null===n&&(m.email="Email field required"),null===r&&(m.password="Password field required"),null===l&&(m.username="Username field required"),null===o&&(m.phoneNo="Phone no field required"),null===c&&(m.address="Address field required"),null===i&&(m.pincode="Pincode field required"),"select"===s&&(m.role="Role is required"),a.setState({formError:m})},a.selectChangeHandle=function(e){var t=a.state.formError;t.role="select"===e.trim()?"please select role ":"",a.setState(Object(f.a)({formErrors:t},"role",e),(function(){}))},a.adduserSubmitHandler=function(e){if(e.preventDefault(),he(a.state)){var t={username:U.a.escape(a.state.username.trim()),email:U.a.escape(a.state.email.trim()),password:U.a.escape(a.state.password.trim()),phoneNo:U.a.escape(a.state.phoneNo.trim()),address:U.a.escape(a.state.address.trim()),pincode:U.a.escape(a.state.pincode.trim()),role:U.a.escape(a.state.role.trim())};S.post("/signup",{userData:t}).then((function(e){e.data.success,z.a.open({message:e.data.message,duration:2,top:80})})).catch((function(e){console.log("err---",e),z.a.open({message:e.message,duration:2,top:80})}))}},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.isAuthenticated)return r.a.createElement($.a,{to:"/"});var t=this.state.formError;return r.a.createElement(k.a,null,r.a.createElement(y.a,{span:24},r.a.createElement(E.a,null,r.a.createElement(Z,null),r.a.createElement(Y.e,{className:"text-center mt-5",style:{backgroundColor:"#FFF",paddingBottom:"5%"}},r.a.createElement(de,{style:{backgroundColor:"#FFF"}},r.a.createElement(k.a,null,r.a.createElement(y.a,{xs:{span:18,offset:3},sm:{span:12,offset:7},md:{span:10,offset:7}},r.a.createElement("form",{className:"form",onSubmit:this.adduserSubmitHandler},r.a.createElement("h3",{className:"h3"},"Add New Site Executive "),r.a.createElement(v.a.Item,{className:"formElement",hasFeedback:!0,validateStatus:t.username.length>0?"error":"",help:t.username},r.a.createElement(N.a,{placeholder:"Full name",name:"username",prefix:r.a.createElement(C.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}})),r.a.createElement(v.a.Item,{className:"formElement",hasFeedback:!0,validateStatus:t.email.length>0?"error":"",help:t.email},r.a.createElement(N.a,{placeholder:"email",name:"email",prefix:r.a.createElement(C.a,{type:"ie",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}})),r.a.createElement(v.a.Item,{className:"formElement",hasFeedback:!0,validateStatus:t.password.length>0?"error":"",help:t.password},r.a.createElement(N.a,{required:!0,placeholder:"password",name:"password",prefix:r.a.createElement(C.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}})),r.a.createElement(v.a.Item,{className:"formElement",hasFeedback:!0,validateStatus:t.phoneNo.length>0?"error":"",help:t.phoneNo},r.a.createElement(N.a,{placeholder:"Phone number",name:"phoneNo",prefix:r.a.createElement(C.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}})),r.a.createElement(v.a.Item,{className:"formElement",hasFeedback:!0,validateStatus:t.address.length>0?"error":"",help:t.address},r.a.createElement(N.a.TextArea,{placeholder:"Address",name:"address",onChange:function(t){return e.onInputChange(t)}})),r.a.createElement(v.a.Item,{className:"formElement",hasFeedback:!0,validateStatus:t.pincode.length>0?"error":"",help:t.pincode},r.a.createElement(N.a,{placeholder:"Pincode",name:"pincode",prefix:r.a.createElement(V.a,{icon:K.a,style:{color:"rgba(0,0,0,.25)"}}),onChange:function(t){return e.onInputChange(t)}})),r.a.createElement(v.a.Item,{className:"formElement",hasFeedback:!0,validateStatus:t.role.length>0?"error":"",help:t.role},r.a.createElement(_.a,{defaultValue:"select",style:{width:"100%"},onChange:this.selectChangeHandle,showArrow:!0},r.a.createElement(ue,{key:"select",value:"select",disabled:!0},"Select Role"),r.a.createElement(ue,{key:"admin",value:"admin"},"Admin"),r.a.createElement(ue,{key:"executive",value:"executive"},"Executive"))),r.a.createElement(v.a.Item,{className:"formElement"},r.a.createElement(I.a,{onClick:this.onButtonClickHandler,htmlType:"submit",block:!0,style:{backgroundColor:"#2BBBAD",color:"#FFF",fontSize:"18px"}},"Add User",r.a.createElement(C.a,{type:"user-add",style:{marginLeft:"3%"}})))))))),r.a.createElement(k.a,null,r.a.createElement(y.a,null,r.a.createElement(Q,null))))))}}]),t}(n.Component),Ee=Object(i.b)((function(e){return{isAuthenticated:null!==e.auth.token,isError:e.auth.error,isLoading:e.auth.loading,authRedirectPath:e.auth.authRedirectPath}}),(function(e){return{onAuth:function(t){return e(F(t))},onSetAuthRedirectPath:function(){return e(A("/adduser"))}}}))(be),ke=(a(532),E.a.Content),ye=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,a.state={selectedRows:[],tableData:[]},a.onExportReport=function(){S.get("/exportUserData",{responseType:"blob"}).then((function(e){Object(ce.saveAs)(e.data,"MbiotechUsers.xlsx")})).catch((function(e){console.log(e)}))},a.deleteRow=function(e){var t=e._id;S.put("/userDelete",{id:t}).then((function(e){console.log("res--",e),e.data.success&&(z.a.open({message:e.data.message,duration:5,top:80}),S.get("/users").then((function(e){e.data.success&&a.setState({tableData:e.data.data})})).catch((function(e){console.log("er-last-",e)})))})).catch((function(e){console.log("err---",e)}))},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,S.get("/users").then((function(t){t.data.success&&e.setState({tableData:t.data.data})})).catch((function(e){console.log("er--",e)}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=[{title:"Full Name",dataIndex:"username",key:"username",width:150},{title:"Email",dataIndex:"email",key:"email",width:150},{title:"Phoneno",dataIndex:"phoneNo",key:"phoneNo",width:100},{title:"Address",dataIndex:"address",key:"address",width:210},{title:"Pincode",dataIndex:"pincode",key:"pincode",width:100},{title:"Role",dataIndex:"role",key:"role",width:100},{title:"Action",key:"action",fixed:"right",width:100,render:function(t,a){return r.a.createElement("span",null,r.a.createElement(I.a,{type:"link",onClick:function(){return e.deleteRow(t)}},r.a.createElement(C.a,{type:"delete",style:{color:"red"}})))}}];return this.props.isAuthenticated?r.a.createElement(k.a,null,r.a.createElement(y.a,{span:24},r.a.createElement(E.a,null,r.a.createElement(Z,null),r.a.createElement(Y.e,{className:"text-center mt-5 containers"},r.a.createElement(I.a,{type:"primary",ghost:!0,htmlType:"button",style:{marginTop:"4%",float:"left",marginLeft:"5%",color:"#2BBBAD",borderColor:"#2BBBAD",width:120},onClick:this.onExportReport},"Export"),r.a.createElement(ke,{style:{backgroundColor:"#FFF",marginTop:"7%"}},r.a.createElement(k.a,null,r.a.createElement(y.a,{xs:{span:23,offset:3},sm:{span:12,offset:2},md:{span:24,offset:1}},r.a.createElement("div",{style:{marginTop:"2%",marginRight:"2%"}},r.a.createElement(oe.a,{scroll:{x:1300,y:350},rowKey:function(e){return e.email},columns:t,dataSource:this.state.tableData,pagination:!0,bordered:!0})))))),r.a.createElement(k.a,null,r.a.createElement(y.a,null,r.a.createElement(Q,null)))))):r.a.createElement($.a,{to:"/"})}}]),t}(n.Component),ve=Object(i.b)((function(e){return{isAuthenticated:null!=e.auth.token}}))(ye),Ne=a(544),Ce=(a(533),E.a.Content),Ie=Ne.a.RangePicker,xe=["YYYY-MM-DD","YYYY-MM-DD"],we=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,a.state={selectedRows:[],tableData:[],userData:[],filterData:{username:"",fromDate:"",toDate:""}},a.onExportReport=function(){var e=a.state.filterData;""!==e.username&&""!==e.fromDate&&""!==e.toDate?S.post("/exportSiteDetails",{filterData:a.state.filterData},{responseType:"blob"}).then((function(e){Object(ce.saveAs)(e.data,"MbiotechVisitors.xlsx")})).catch((function(e){console.log(e)})):S.get("/exportData",{responseType:"blob"}).then((function(e){Object(ce.saveAs)(e.data,"MbiotechVisitors.xlsx")})).catch((function(e){console.log(e)}))},a.deleteRow=function(e){var t=e._id;S.put("/visitorDelete",{id:t}).then((function(e){console.log("res--",e),e.data.success&&(z.a.open({message:e.data.message,duration:2,top:80}),S.get("/visitorData").then((function(e){e.data.success?a.setState({tableData:e.data.data}):z.a.open({message:e.data.message,duration:2,top:80})})).catch((function(e){console.log("er-last-",e)})))})).catch((function(e){console.log("err---",e)}))},a.onSelectChange=function(e){console.log("value",e);var t=a.state.filterData;t.username=U.a.escape(e),a.setState({filterData:t})},a.onDateChange=function(e,t){var n=a.state.filterData;n.fromDate=U.a.escape(t[0]),n.toDate=U.a.escape(t[1]),a.setState({filterData:n})},a.onFilterTable=function(e){e.preventDefault();var t=a.state.filterData;""===t.username||""===t.fromDate||""===t.toDate?z.a.open({message:"Please fill the filter data",duration:2,top:80}):S.post("/filterData",{filterData:a.state.filterData}).then((function(e){e.data.success?a.setState({tableData:e.data.data}):z.a.open({message:e.data.message,duration:2,top:80})})).catch((function(e){console.log("fil err--",e)}))},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,S.get("/visitorData").then((function(t){t.data.success&&e.setState({tableData:t.data.data})})).catch((function(e){console.log("er--",e)})),S.get("/users").then((function(t){t.data.success&&(console.log("res--",t.data.data),e.setState({userData:t.data.data}))})).catch((function(e){console.log("er--",e)}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=[{title:"Executive Name",dataIndex:"executiveName",key:"executiveName",fixed:"left",width:120},{title:"Name",dataIndex:"fullname",key:"fullname",fixed:"left",width:100},{title:"Email",dataIndex:"email",key:"age",width:100},{title:"Address",dataIndex:"address",key:"address",width:100},{title:"Phone",dataIndex:"phoneNo",key:"phoneNo",width:100},{title:"Place type",dataIndex:"typeOfPlace",key:"typeOfPlace",width:150},{title:"ContrName",dataIndex:"contractorName",key:"contractorName",width:110},{title:"ContrNo",dataIndex:"contractorPhoneNo",key:"contractorPhoneNo",width:100},{title:"ElectricianName",dataIndex:"electricianName",key:"electricianName",width:150},{title:"ElectricianNo",dataIndex:"electricianNo",key:"electricianNo",width:150},{title:"CarpenterName",dataIndex:"CarpenterName",key:"CarpenterName",width:150},{title:"CarpenterNo",dataIndex:"CarpenterNo",key:"CarpenterNo",width:150},{title:"PainterName",dataIndex:"PainterName",key:"PainterName",width:150},{title:"PainterNo",dataIndex:"PainterNo",key:"PainterNo",width:150},{title:"PlumberName",dataIndex:"PlumberName",key:"PlumberName",width:150},{title:"PlumberNo",dataIndex:"PlumberNo",key:"PlumberNo",width:150},{title:"InteriorName",dataIndex:"InteriorName",key:"InteriorName",width:150},{title:"InteriorNo",dataIndex:"InteriorNo",key:"InteriorNo",width:150},{title:"FabricatorName",dataIndex:"FabricatorName",key:"FabricatorName",width:150},{title:"FabricatorNo",dataIndex:"FabricatorNo",key:"FabricatorNo",width:150},{title:"Latitude",dataIndex:"latitude",key:"latitude",width:100},{title:"longitude",dataIndex:"longitude",key:"longitude",width:100},{title:"City",dataIndex:"city",key:"city",width:100},{title:"Timestamp",dataIndex:"timestamp",key:"timestamp",width:120},{title:"Action",key:"action",fixed:"right",width:100,render:function(t,a){return r.a.createElement("span",null,r.a.createElement(I.a,{type:"link",onClick:function(){return e.deleteRow(t)}},r.a.createElement(C.a,{type:"delete",style:{color:"red"}})))}}];return this.props.isAuthenticated?r.a.createElement(k.a,null,r.a.createElement(y.a,{span:24},r.a.createElement(E.a,null,r.a.createElement(Z,null),r.a.createElement(Y.e,{className:"text-center mt-5 containers"},r.a.createElement(I.a,{type:"primary",ghost:!0,htmlType:"button",style:{marginTop:"4%",float:"left",marginLeft:"5%",color:"#2BBBAD",borderColor:"#2BBBAD",width:120},onClick:this.onExportReport},"Export"),r.a.createElement(Ce,{style:{backgroundColor:"#FFF",marginTop:"13%"}},r.a.createElement(k.a,null,r.a.createElement(y.a,{xs:{span:23,offset:3},sm:{span:12,offset:3},md:{span:24,offset:1}},r.a.createElement("div",null,r.a.createElement(_.a,{placeholder:"Select User",style:{width:120,marginRight:"2%"},onChange:this.onSelectChange},this.state.userData.map((function(e){return r.a.createElement(_.a.Option,{key:e._id,value:e.username},e.username)}))),r.a.createElement(Ie,{style:{marginRight:"2%"},onChange:this.onDateChange,format:xe[0]}),r.a.createElement(I.a,{type:"primary",ghost:!0,htmlType:"button",style:{color:"#2BBBAD",borderColor:"#2BBBAD",width:120},onClick:this.onFilterTable},"Search")),r.a.createElement("div",{style:{marginTop:"4%",marginRight:"2%"}},r.a.createElement(oe.a,{scroll:{x:1300,y:350},rowKey:function(e){return e.email},columns:t,dataSource:this.state.tableData,pagination:!0,bordered:!0})))))),r.a.createElement(k.a,null,r.a.createElement(y.a,null,r.a.createElement(Q,null)))))):r.a.createElement($.a,{to:"/"})}}]),t}(n.Component),Se=Object(i.b)((function(e){return{isAuthenticated:null!=e.auth.token}}))(we),Pe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.props.onTryAutoSignUp()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){return r.a.createElement($.d,null,r.a.createElement($.b,{path:"/",exact:!0,component:M}),r.a.createElement($.b,{path:"/dashboard",component:le}),r.a.createElement($.b,{path:"/adduser",component:Ee}),r.a.createElement($.b,{path:"/report",component:me}),r.a.createElement($.b,{path:"/users",component:ve}),r.a.createElement($.b,{path:"/sitedetails",component:Se}),r.a.createElement($.a,{to:"/"}))}}]),t}(n.Component),Oe=Object($.g)(Object(i.b)((function(e){return{isAuthenticated:null!==e.auth.token}}),(function(e){return{onTryAutoSignUp:function(){return e((function(e){var t=localStorage.getItem("token");if(t){var a=new Date(localStorage.getItem("expirationDate"));if(a<=new Date)e(D());else{var n=localStorage.getItem("username"),r=localStorage.getItem("role");e(P(t,n,r)),e(j((a.getTime()-(new Date).getTime())/1e3))}}else e(D())}))}}}))(Pe));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var De=a(243),je=function(e,t){return Object(De.a)({},e,{},t)},Ae={token:null,username:null,error:null,loading:!1,role:null,authRedirectPath:"/"},Fe=function(e,t){return je(e,{error:null,loading:!0})},Re=function(e,t){return je(e,{error:null,loading:!1,token:t.token,role:t.role,username:t.username})},Be=function(e,t){return je(e,{error:t.error,loading:!1})},Te=function(e,t){return je(e,{token:null,username:null,role:null,authRedirectPath:"/"})},Me=function(e,t){return je(e,{authRedirectPath:t.path})},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_REQUEST":return Fe(e);case"LOGIN_SUCCESS":return Re(e,t);case"LOGIN_FAILURE":return Be(e,t);case"LOGOUT":return Te(e);case"SET_AUTH_REDIRECT_PATH":return Me(e,t);default:return e}},ze=Object(s.c)({auth:_e}),qe=Object(s.d)(ze,Object(s.a)(m.a)),Le=r.a.createElement(i.a,{store:qe},r.a.createElement(c.a,null,r.a.createElement(Oe,null)));o.a.render(Le,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[247,1,2]]]);
//# sourceMappingURL=main.4b54be65.chunk.js.map